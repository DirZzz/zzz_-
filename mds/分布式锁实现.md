- ## 基于Redis

- ## 基于zookeeper

  - 实现思路：降同一互斥操作所生成的有序节点放在同一路径下，每次都以最小的为当前锁的持有者。

    - 获取锁的过程：

      1. 确认此节点是否为最小的节点
         1. 是：获取锁
            1. 否：当前线程wait设置的阻塞时间，并监听**最小节点**的删除事件
            2. 阻塞时间到了，再次自旋竞争锁
            3. 前一个节点操作处理完成，会唤醒此线程，当前线程继续自旋竞争

      可优化因素：上面自旋获取锁的过程中，监听的如果是最小节点，那么当最小节点被删除的时候，将会通知所有其他线程。**所有此处如果讲最小节点改为前一个节点，会节省此处的通知开销以及其他线程的自旋开销**

      

      

      