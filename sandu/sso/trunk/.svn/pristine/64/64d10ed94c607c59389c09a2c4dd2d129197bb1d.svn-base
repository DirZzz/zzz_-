<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sandu.service.system.dao.BaseAreaDao">
    <select id="selectAreaName" resultType="string">
	    select
	        area_name
	    from
	        base_area
	    where
	        id = #{areaId};
	</select>

	<select id="selectByAreaCode" resultType="string">
		select
	        area_name
	    from
	        base_area
	    where
	        area_code = #{provinceCode}
	</select>

	<select id="selectAreaCodeByAreaNameLike" resultType="string">
		SELECT
		  area_code
		FROM
		  base_area
		WHERE
		  is_deleted = 0 AND
		  area_name like  CONCAT(CONCAT('%',#{areaName}),'%')
		  limit 1
	</select>

	<insert id="saveMiniProgramUserWxLocaltion" parameterType="com.sandu.api.user.model.MiniProgramUserWxLocaltion">
		insert into
			mini_program_user_wx_localtion
		(
			id,user_id,province_code,
			city_code,creator,gmt_create,
			gmt_modified,is_deleted,province_name,city_name
		)values
		(
			#{id},#{userId},#{provinceCode},
			#{cityCode},#{creator},#{gmtCreate},
			#{gmtModified},#{isDeleted},#{provinceName},#{cityName}
		)
	</insert>

	<update id="updateMiniProgramUserWxLocaltion" parameterType="com.sandu.api.user.model.MiniProgramUserWxLocaltion">
		update
		  mini_program_user_wx_localtion
		set
		  province_code = #{provinceCode},
		  city_code = #{cityCode},
		  gmt_modified = #{gmtModified}
		WHERE
		  user_id = #{userId} AND
		  is_deleted = 0
	</update>

	<select id="getMiniProWxLocaltionInfoByUserId" resultType="com.sandu.api.user.model.MiniProgramUserWxLocaltion">
		SELECT
		  *
	  	from
	  	  mini_program_user_wx_localtion
	  	where
	  	  user_id = #{userId}
	  	  AND is_deleted = 0
	</select>
</mapper>
